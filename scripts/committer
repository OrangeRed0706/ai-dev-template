#!/bin/bash
# scripts/committer - Scoped commit helper
# 用法：./scripts/committer "commit message" file1 file2 ...
#
# 這個腳本只會 stage 指定的檔案，避免意外 commit 其他改動。
# 適合多 agent 協作時使用。

set -euo pipefail

if [ $# -lt 2 ]; then
    echo "用法: $0 \"commit message\" file1 [file2 ...]"
    echo "範例: $0 \"feat: add login page\" src/login.ts src/auth.ts"
    exit 1
fi

MESSAGE="$1"
shift

# Stage 指定的檔案
for file in "$@"; do
    if [ -e "$file" ]; then
        git add "$file"
    else
        echo "警告: 檔案不存在: $file"
    fi
done

# Commit
git commit -m "$MESSAGE"

echo "✓ Committed: $MESSAGE"
